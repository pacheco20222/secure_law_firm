{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Case Details: {{ case.case_title }}</h2>
    <p>{{ case.case_description }}</p>
    
    <!-- Documents associated with the case -->
    <h4>Documents</h4>
    <div class="list-group">
        {% for document in documents %}
            <div class="list-group-item bg-dark text-light rounded mb-2">
                <h5>{{ document.document_title }}</h5>
                <p>{{ document.document_description }}</p>
                <p><strong>Uploaded by:</strong> {{ document.uploaded_by }} | <strong>Uploaded at:</strong> {{ document.uploaded_at }}</p>
                <a href="{{ document.file_url }}" class="btn btn-info" target="_blank">View Document</a>
                {% if current_user.role == 'admin' or current_user.role == 'lawyer' %}
                    <!-- Pass the document's _id as a string for document_id -->
                    <a href="{{ url_for('edit_document', document_id=str(document._id)) }}" class="btn btn-warning">Edit Document</a>
                {% endif %}
            </div>
        {% else %}
            <p class="text-muted">No documents available for this case.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
